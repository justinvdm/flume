{"version":3,"file":null,"sources":["../src/map.js","../src/reduce.js","../src/utils/identity.js","../src/filter.js","../src/sink.js","../src/strsplit.js","../node_modules/flume-core/flume-core.js"],"sourcesContent":["export default function map(fn) {\n  return function mapFn(_, v, opts) {\n    return [null, fn(v, opts)];\n  };\n}\n","export default function reduce(init, reducer) {\n  if (arguments.length < 2) {\n    reducer = init;\n    init = retNull;\n  }\n\n  reducer = parseReducer(reducer);\n\n  return {\n    init: init,\n    process: reduceFn\n  };\n\n  function reduceFn(state, v, opts) {\n    try{\n    var res = reducer(state, v, opts);\n    return [res, res];\n    } catch(e) { console.log(e); }\n  }\n}\n\n\nfunction parseReducer(obj) {\n  if (typeof obj == 'function') return obj;\n  if (Array.isArray(obj)) return caseSourceOfReducer(obj);\n  throw new Error('Unsupported reducer type given to reduce(): ' + typeof obj);\n}\n\n\nfunction caseSourceOfReducer(pairs) {\n  var defaultFn = identityProcessor;\n\n  if (typeof pairs[pairs.length - 1] == 'function') {\n    defaultFn = pairs[pairs.length - 1];\n    pairs = pairs.slice(0, -1);\n  }\n\n  return function caseSourceOfFn(state, v, opts) {\n    var source = opts.source;\n    var i = -1;\n    var n = pairs.length;\n    var pair;\n\n    while (++i < n) {\n      pair = pairs[i];\n      if (pair[0] === source) return pair[1](state, v, opts);\n    }\n\n    return defaultFn(state, v, opts);\n  };\n}\n\n\nfunction retNull() {\n  return null;\n}\n\n\nfunction identityProcessor(state, v) {\n  return v;\n}\n","function identity(v) {\n  return v;\n}\n\n\nexport default identity;\n","import {nil, resolveSeq} from './core';\nimport identity from './utils/identity';\n\n\nexport default function filter(fn) {\n  fn = fn || identity;\n  return function filterFn(_, v, opts) {\n    return [null, resolveSeq([fn(v, opts), v]).then(test)];\n  };\n}\n\n\nfunction test(res) {\n  return res[0]\n    ? res[1]\n    : nil;\n}\n","export default function sink(init, fn) {\n  return {\n    init: init,\n    process: sinkFn\n  };\n\n  function sinkFn(state, v, opts) {\n    return [state, fn(state, v, opts)];\n  }\n}\n","function init() {\n  return '';\n}\n\n\nfunction strsplit(sep) {\n  function process(data, chunk) {\n    var lines = (data + chunk).split(sep);\n    return [lines.slice(-1), lines.slice(0, -1)];\n  }\n\n  return {\n    init: init,\n    process: process\n  };\n}\n\n\nexport default strsplit;\n",";(function(root, factory) {\n  if (typeof root.define === 'function' && root.define.amd) root.define(factory);\n  else if (typeof exports === 'object') factory(true);\n  else root.flume = factory();\n})(this, function(cjs) {\n  // api\n\n  var nil = message('flume:nil', null);\n\n\n  function input() {\n    return new InputDef();\n  }\n\n\n  function create(defs) {\n    var self = {};\n    self.dispatch = dispatch;\n    self.inputs = buildGraph(self, defs);\n\n    return self;\n\n    function dispatch(src, msgs, done) {\n      var nodes = inputsOf(self.inputs, src);\n      var n = nodes.length;\n      var i = -1;\n\n      done = callOnNth(n, done || noop);\n      while (++i < n) nodes[i].handle(msgs, done);\n\n      return self;\n    }\n  }\n\n\n  function message(type, v) {\n    return new Msg(type, v);\n  }\n\n\n  function except(fn) {\n    return trap({'flume:error': fn});\n  }\n\n\n  function trap(process) {\n    return {\n      process: conj({'*': trapFallbackMsgHandler}, process)\n    };\n  }\n\n\n  // types\n\n  function Msg(type, value) {\n    this.type = type;\n    this.value = value;\n  }\n\n\n  function InputDef() {\n    this.defType = 'input';\n  }\n\n\n  function ProcessorDef(opts) {\n    this.defType = 'processor';\n    this.init = ensure(opts.init, noop);\n    this.process = opts.process;\n  }\n\n\n  function Node(graph, def, child, index) {\n    this.graph = graph;\n    this.def = def;\n    this.child = child;\n    this.index = index;\n    this.handle = createHandler(this);\n  }\n\n\n  // graph building\n\n  function buildGraph(graph, defs, child, index) {\n    var i = defs.length - 1;\n    if (i < 0) return [];\n\n    // tail\n    if (i) child = new Node(graph, createProcessorDef(defs[i]), child, index);\n    while (--i > 0) child = new Node(graph, createProcessorDef(defs[i]), child, 0);\n\n    return buildGraphHead(graph, defs[0], child);\n  }\n\n\n  function buildGraphHead(graph, defs, child) {\n    defs = castArray(defs);\n\n    var inputs = [];\n    var i = -1;\n    var def;\n    var n = defs.length;\n\n    while (++i < n) {\n      def = defs[i];\n\n      if (Array.isArray(def)) {\n        inputs.push.apply(inputs, buildGraph(graph, def, child, i));\n      } else if (def instanceof InputDef) {\n        inputs.push(new Node(graph, def, child, i));\n      } else {\n        throw new Error(\"Expected input or array but got \" + typeOf(def));\n      }\n    }\n\n    return inputs;\n  }\n\n\n  function createProcessorDef(obj) {\n    if (typeof obj === 'function') {\n      obj = {\n        process: {'flume:value': obj}\n      };\n    }\n    else if (typeof (obj || 0).process === 'function') {\n      obj = conj(obj, {\n        process: {'flume:value': obj.process}\n      });\n    }\n    else if (typeOf((obj || 0).process) !== 'object') {\n      throw new Error(\n        \"Expected function or object matching processor shape but got \" +\n        typeOf(obj));\n    }\n\n    return new ProcessorDef(obj);\n  }\n\n\n  // message processing\n\n  function trapFallbackMsgHandler(state, v) {\n    return [v];\n  }\n\n\n  function createHandler(node) {\n    return {\n      input: createInputHandler,\n      processor: createProcessorHandler\n    }[node.def.defType](node);\n  }\n\n\n  function createInputHandler(node) {\n    return function handle(msgs, end) {\n      node.child.handle(msgs, node, node, end);\n    };\n  }\n\n\n  function createProcessorHandler(node) {\n    var queue = [];\n    var isBusy = false;\n    var task = null;\n    var state = node.def.init();\n    var processAsync = maybeAsync(process);\n\n    return function handle(msgs, parent, source, end) {\n      msgs = castArray(msgs).map(castMessage);\n\n      var i = -1;\n      var n = msgs.length - 1;\n\n      var taskDefaults = {\n        source: source,\n        parent: parent,\n      };\n\n      while (++i < n) schedule(conj(taskDefaults, {\n        msg: msgs[i],\n        end: noop\n      }));\n\n      if (n > -1) schedule(conj(taskDefaults, {\n        msg: msgs[n],\n        end: end\n      }));\n    };\n\n    function schedule(task) {\n      queue.push(task);\n      if (!isBusy) next();\n    }\n\n    function next() {\n      task = queue.shift();\n      if (task) run();\n    }\n\n    function run() {\n      isBusy = true;\n\n      return processAsync()\n        .then(resolveSeq)\n        .then(success, failure);\n    }\n\n    function process() {\n      var fns = node.def.process;\n      var fn = fns[task.msg.type] || fns['*'];\n      return !fn\n        ? [state, task.msg]\n        : fn(state, task.msg.value, {\n          source: task.source.def,\n          parent: task.parent.def,\n          dispatch: node.graph.dispatch\n        });\n    }\n\n    function done(msgs) {\n      var currTask = task;\n      isBusy = false;\n      task = null;\n\n      if (node.child) node.child.handle(msgs, node, currTask.source, currTask.end);\n      else currTask.end();\n\n      next();\n    }\n\n    function success(res) {\n      var msg;\n\n      if (Array.isArray(res)) {\n        state = res[0];\n        msg = res.length > 1\n          ? res[1]\n          : state;\n      }\n      else {\n        msg = nil;\n      }\n\n      done(msg);\n    }\n\n    function failure(e) {\n      if (!node.child) throw new UnhandledError(e);\n      done(message('flume:error', e));\n    }\n  }\n\n\n  // utils\n\n  function inputsOf(inputs, def) {\n    var res = [];\n    var n = inputs.length;\n    var i = -1;\n    var input;\n\n    while (++i < n) {\n      input = inputs[i];\n      if (input.def === def) res.push(input);\n    }\n\n    return res;\n  }\n\n\n  function conj() {\n    var res = {};\n    var objects = Array.prototype.slice.call(arguments);\n\n    var i = -1;\n    var n = objects.length;\n    var obj;\n\n    while (++i < n) {\n      obj = objects[i];\n      for (var k in obj) if (obj.hasOwnProperty(k)) res[k] = obj[k]\n    }\n\n    return res;\n  }\n\n\n  function noop() {\n    return null;\n  }\n\n\n  function ensure(v, defaultVal) {\n    return typeof v === 'undefined'\n      ? defaultVal\n      : v;\n  }\n\n\n  function identity(v) {\n    return v;\n  }\n\n\n  function throwError(e) {\n    throw e;\n  }\n\n\n  function castMessage(v) {\n    return !(v instanceof Msg)\n      ? message('flume:value', v)\n      : v;\n  }\n\n\n  function castArray(v) {\n    return !Array.isArray(v)\n      ? [v]\n      : v;\n  }\n\n\n  function typeOf(v) {\n    return v !== null\n      ? typeof v\n      : 'null';\n  }\n\n\n  function callOnNth(n, fn) {\n    var i = 0;\n\n    return function onNthFn() {\n      if (++i >= n) fn.apply(null, arguments);\n    };\n  }\n\n\n  function maybeAsync(fn) {\n    return function maybeAsyncFn() {\n      try {\n        var v = fn.apply(this, arguments);\n        return castThenable(v);\n      } catch (e) {\n        if (e instanceof UnhandledError) throw e.error;\n        return thenableError(e);\n      }\n    }\n  }\n\n\n  function castThenable(v) {\n    return !isThenable(v)\n      ? thenableValue(v)\n      : v;\n  }\n\n\n  function thenableValue(v) {\n    return new Thenable(v, false);\n  }\n\n\n  function thenableError(e) {\n    return new Thenable(e, true);\n  }\n\n\n  function resolveSeq(values) {\n    return Array.isArray(values) && values.filter(isThenable).length > 0\n      ? resolveThenablesSeq(values)\n      : castThenable(values);\n  }\n\n\n  function resolveThenablesSeq(values) {\n    var res = [];\n    var n = values.length;\n    var i = -1;\n    var j = -1;\n    var p = thenableValue(null);\n\n    while (++i < n) p = p.then(call);\n    return p.then(done);\n\n    function call() {\n      return castThenable(values[++j]).then(push);\n    }\n\n    function push(v) {\n      res.push(v);\n    }\n\n    function done() {\n      return res;\n    }\n  }\n\n\n  function isThenable(v) {\n    return !!(v || 0).then;\n  }\n\n\n  function UnhandledError(error) {\n    this.error = error;\n  }\n\n\n  function Thenable(value, isFailure) {\n    this.value = value;\n    this.isFailure = isFailure;\n  }\n\n\n  Thenable.prototype.then = maybeAsync(function then(successFn, failureFn) {\n    if (this.isFailure) return (failureFn || throwError).call(this, this.value);\n    else return (successFn || identity).call(this, this.value);\n  });\n\n\n  if (cjs)\n    module.exports = {\n      create: create,\n      input: input,\n      message: message,\n      trap: trap,\n      except: except,\n      nil: nil,\n      conj: conj,\n      maybeAsync: maybeAsync,\n      resolveSeq: resolveSeq\n    }\n  else\n    return {\n      create: create,\n      input: input,\n      message: message,\n      trap: trap,\n      except: except,\n      nil: nil,\n      conj: conj,\n      maybeAsync: maybeAsync,\n      resolveSeq: resolveSeq\n    };\n});\n"],"names":["map","fn","_","v","opts","reduce","init","reducer","reduceFn","state","res","e","console","log","arguments","length","retNull","parseReducer","process","obj","Array","isArray","caseSourceOfReducer","Error","pairs","defaultFn","identityProcessor","slice","pair","source","i","n","identity","filter","resolveSeq","then","test","nil","sink","sinkFn","strsplit","sep","data","chunk","lines","split","root","factory","define","amd","exports","flume","this","cjs","input","InputDef","create","defs","dispatch","src","msgs","done","nodes","inputsOf","self","inputs","callOnNth","noop","handle","buildGraph","message","type","Msg","except","trap","flume:error","conj","*","trapFallbackMsgHandler","value","defType","ProcessorDef","ensure","Node","graph","def","child","index","createHandler","createProcessorDef","buildGraphHead","castArray","push","apply","typeOf","flume:value","node","createInputHandler","processor","createProcessorHandler","end","schedule","task","queue","isBusy","next","shift","run","processAsync","success","failure","fns","msg","parent","currTask","UnhandledError","maybeAsync","castMessage","taskDefaults","objects","prototype","call","k","hasOwnProperty","defaultVal","throwError","castThenable","error","thenableError","isThenable","thenableValue","Thenable","values","resolveThenablesSeq","j","p","isFailure","successFn","failureFn","module"],"mappings":"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"}